Menu="UserPreferences"
Title="Display Settings"
Icon="display-settings.png"
---
<?PHP
/* Copyright 2014, Bergware International.
 * Copyright 2014, Lime Technology
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License version 2,
 * as published by the Free Software Foundation.
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 */
?>
<script>
$(function() {
  presetTime(document.display_settings);
});
function prepareDisplay(form) {
  if (!form.critical.value | !form.warning.value) {
    alert('An empty percentage value is not allowed!');
    return false;
  }
  if (form.warning.value>form.critical.value) {
    alert('Warning percentage must be lower than Critical percentage!');
    return false;
  }
  if (!form.number.value) form.number.value='.,';
  if (form.unit.selectedIndex==1) {
    form.hot.value = Math.round(5/9*(form.hot.value-32));
    form.max.value = Math.round(5/9*(form.max.value-32));
  }
  return true;
}
function presetTime(form) {
  var system = form.date.selectedIndex==0;
  if (system) form.time.selectedIndex = 0;
  form.time.disabled = system;
}
function presetTemp(form) {
  var hot = $('#hot').html();
  var max = $('#max').html();
  if (form.unit.selectedIndex==0) {
    form.hot.value = Math.round(5/9*(form.hot.value-32));
    form.max.value = Math.round(5/9*(form.max.value-32));
	$('#hot').html(hot.replace('F)','C)'));
	$('#max').html(max.replace('F)','C)'));
  } else {
    form.hot.value = Math.round((9/5*form.hot.value)+32);
    form.max.value = Math.round((9/5*form.max.value)+32);
	$('#hot').html(hot.replace('C)','F)'));
	$('#max').html(max.replace('C)','F)'));
  }
}
function presetRefresh(form) {
  for (var i=0,item; item=form.refresh.options[i]; i++) item.value *= -1;
}
function presetPassive(index) {
  if (index==0) $('#passive').hide(); else $('#passive').show();
}
function checkTemp(form,what) {
  if (form.hot.value>=form.max.value) alert(what ? 'Warning temperature must be lower than Critical temperature' : 'Critical temperature must be higher than Warning temperature');
}
function resetDisplay(form) {
  form.date.selectedIndex = 0;
  presetTime(form);
  form.number.selectedIndex = 0;
  form.unit.selectedIndex = 0;
  presetTemp(form);
  form.hot.value = 45;
  form.max.value = 55;
  form.scale.selectedIndex = 0;
  form.align.selectedIndex = 2;
  form.tabs.selectedIndex = 0;
  form.text.value = 1;
  form.critical.value = 90;
  form.warning.value = 70;
  form.view.value = '';
  form.total.value = 1;
  form.spin.value = 1;
  form.usage.value = 0;
  form.icons.value = 1;
  form.banner.value = '';
  form.theme.selectedIndex = 0;
  form.refresh.selectedIndex = 1;
  document.getElementsByName('#passive')[0].checked = false;
  $('#passive').show();
}
</script>

> The display settings below determine how items are displayed on screen. Use these settings to tweak the visual effects to your likings.
>
> You can experiment with these settings as desired, they only affect visual properties.

<form markdown="1" name="display_settings" method="POST" action="/update.php" target="progressFrame" onsubmit="return prepareDisplay(this)">
<input type="hidden" name="#file" value="dynamix/dynamix.cfg"/>
<input type="hidden" name="#section" value="display"/>
Date format:
: <select name="date" size="1" onchange="presetTime(this.form)">
  <?=mk_option($display['date'], "%c", "System Setting")?>
  <?=mk_option($display['date'], "%A, %Y %B %e", "Day, YYYY Month D")?>
  <?=mk_option($display['date'], "%A, %e %B %Y", "Day, D Month YYYY")?>
  <?=mk_option($display['date'], "%A, %B %e, %Y", "Day, Month D, YYYY")?>
  <?=mk_option($display['date'], "%A, %m/%d/%Y", "Day, MM/DD/YYYY")?>
  <?=mk_option($display['date'], "%A, %d-%m-%Y", "Day, DD-MM-YYYY")?>
  <?=mk_option($display['date'], "%A, %d.%m.%Y", "Day, DD.MM.YYYY")?>
  <?=mk_option($display['date'], "%A, %Y-%m-%d", "Day, YYYY-MM-DD")?>
  </select>

Time format:
: <select name="time" size="1">
  <?=mk_option($display['time'], "%I:%M %p", "12 hours")?>
  <?=mk_option($display['time'], "%R", "24 hours")?>
  </select>

Number format:
: <select name="number" size="1">
  <?=mk_option($display['number'], ".,", "American")?>
 <?=mk_option($display['number'], ",.", "European")?>
  </select>

Number scaling:
: <select name="scale" size="1">
  <?=mk_option($display['scale'], "-1", "Automatic")?>
  <?=mk_option($display['scale'], "0", "Disabled")?>
  <?=mk_option($display['scale'], "1", "KB")?>
  <?=mk_option($display['scale'], "2", "MB")?>
  <?=mk_option($display['scale'], "3", "GB")?>
  <?=mk_option($display['scale'], "4", "TB")?>
  <?=mk_option($display['scale'], "5", "PB")?>
  </select>

Number alignment:
: <select name="align" size="1">
  <?=mk_option($display['align'], "left", "Left")?>
  <?=mk_option($display['align'], "center", "Center")?>
  <?=mk_option($display['align'], "right", "Right")?>
  </select>

Page view:
: <select name="tabs" size="1">
  <?=mk_option($display['tabs'], "0", "Tabbed")?>
  <?=mk_option($display['tabs'], "1", "Non-tabbed")?>
  </select>

Table view spacing:
: <select name="view" size="1">
  <?=mk_option($display['view'], "", "Normal")?>
  <?=mk_option($display['view'], "small", "Narrow")?>
  <?=mk_option($display['view'], "wide", "Wide")?>
  </select>

Display array totals:
: <select name="total" size="1">
  <?=mk_option($display['total'], "0", "No")?>
  <?=mk_option($display['total'], "1", "Yes")?>
  </select>

Allow individual disk spin up/down:
: <select name="spin" size="1">
  <?=mk_option($display['spin'], "0", "No")?>
  <?=mk_option($display['spin'], "1", "Yes")?>
  </select>

Show array utilization indicator:
: <select name="usage" size="1">
  <?=mk_option($display['usage'], "0", "No")?>
  <?=mk_option($display['usage'], "1", "Yes")?>
  </select>

Show section icons:
: <select name="icons" size="1">
  <?=mk_option($display['icons'], "", "No")?>
  <?=mk_option($display['icons'], "1", "Yes")?>
  </select>

Show banner image:
: <select name="banner" size="1">
  <?=mk_option($display['banner'], "", "No")?>
  <?=mk_option($display['banner'], "image", "Yes")?>
  </select>

Show Dashboard apps:
: <select name="dashapps" size="1">
  <?=mk_option($display['dashapps'], "icons", "Icons")?>
  <?=mk_option($display['dashapps'], "banners", "Banners")?>
  <?=mk_option($display['dashapps'], "none", "None")?>
  </select>

Dynamix color theme:
: <select name="theme" size="1">
  <?=mk_option($display['theme'], "white", "White")?>
  <?=mk_option($display['theme'], "black", "Black")?>
  </select>

Used / Free columns:
: <select name="text" size="1">
  <?=mk_option($display['text'], "0", "Text")?>
  <?=mk_option($display['text'], "1", "Bar (gray)")?>
  <?=mk_option($display['text'], "2", "Bar (color)")?>
  </select>

Critical disk utilization level (%):
: <input type="number" min="0" max="100" name="critical" class="narrow" maxlength="3" value="<?=$display['critical']?>">

> *Critical disk utilization* sets the critical threshold for a hard disk utilization. Exceeding this threshold will result in an alert notification.

Warning disk utilization level (%):
: <input type="number" min="0" max="99" name="warning" class="narrow" maxlength="2" value="<?=$display['warning']?>">

> *Warning disk utilization* sets the warning threshold for a hard disk utilization. Exceeding this threshold will result in an warning notification.
>
> When the warning level is set equal or greater than the critical level, there will be only critical notifications (warnings are not existing).

Temperature unit:
: <select name="unit" size="1" onchange="presetTemp(this.form)">
  <?=mk_option($display['unit'], "C", "Celsius")?>
  <?=mk_option($display['unit'], "F", "Fahrenheit")?>
  </select>

<span id="hot">Warning disk temperature threshold (&deg;<?=$display['unit']?>):</span>
: <input type="number" min="0" max="300" name="hot" class="narrow" maxlength="3" value="<?=$display['unit']=='C'?$display['hot']:round(9/5*$display['hot']+32)?>" onchange="checkTemp(this.form,true)">

> *Warning disk temperature* sets the warning threshold for a hard disk temperature. Exceeding this threshold will result in an warning notification.

<span id="max">Critical disk temperature threshold (&deg;<?=$display['unit']?>):</span>
: <input type="number" min="0" max="300" name="max" class="narrow" maxlength="3" value="<?=$display['unit']=='C'?$display['max']:round(9/5*$display['max']+32)?>" onchange="checkTemp(this.form,false)">

> *Critical disk temperature* sets the critical threshold for a hard disk temperature. Exceeding this threshold will result in an alert notification.

Page update frequency:
: <select name="refresh" size="1" onchange="presetPassive(this.selectedIndex)">
  <?=mk_option($display['refresh'], "0", "Disabled")?>
  <?=mk_option($display['refresh'], $display['refresh']<0?"-1000":"1000", "Real-time")?>
  <?=mk_option($display['refresh'], $display['refresh']<0?"-10000":"10000", "Regular")?>
  <?=mk_option($display['refresh'], $display['refresh']<0?"-60000":"60000", "Slow")?>
  </select><span id="passive"<?=$display['refresh']==0?" style='display:none'":""?>>&nbsp;<input type="checkbox" name="#passive"<?=$display['refresh']<0?' checked':''?> onchange="presetRefresh(this.form)">disable page updates while parity operation is running.</span>

> *Page update* determines how often the browser will query the unRAID server to obtain the latest information.
>
> By default 'real-time' is selected. In case one experiences issues in the operation of the unRAID server then the frequency can be lowered or disabled all together.
> In the later case a 'refresh' button appears on the top of the screen to do manual refreshing.
>
> A special option exists to disable screen updates while a parity operation is in progress. Use this option when degradation of the parity operation is observed.

<button type="button" onclick="resetDisplay(this.form);">Default</button>
: <input type="submit" name="#apply" value="Apply"><button type="button" onclick="done()">Done</button>
</form>
